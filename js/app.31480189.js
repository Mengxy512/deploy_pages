(function(){"use strict";var t={7202:function(t,e,a){var r=a(5130),i=a(6768);const n={id:"app"};function o(t,e,a,r,o,c){const s=(0,i.g2)("MainComponent");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(s)])}function c(t,e,a,r,n,o){const c=(0,i.g2)("NotificationPrefForm"),s=(0,i.g2)("StockChart"),l=(0,i.g2)("AlertChecker");return(0,i.uX)(),(0,i.CE)("div",null,[e[0]||(e[0]=(0,i.Lk)("h1",null,"Notification Preferences and Stock Chart",-1)),(0,i.bF)(c),(0,i.bF)(s),(0,i.bF)(l,{userId:1})])}const s={class:"form-group"},l={class:"form-group"},u={class:"form-group"},m={class:"form-group"},p={class:"form-group"};function d(t,e,a,n,o,c){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("form",{onSubmit:e[5]||(e[5]=(0,r.D$)(((...t)=>c.submitForm&&c.submitForm(...t)),["prevent"])),class:"compact-form"},[(0,i.Lk)("div",s,[e[7]||(e[7]=(0,i.Lk)("label",{for:"open_price"},"Open Price Condition:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.formData.preference.open_price=t),id:"open_price",required:""},e[6]||(e[6]=[(0,i.Lk)("option",{value:"<"},"Less than previous interval",-1),(0,i.Lk)("option",{value:">"},"Greater than previous interval",-1)]),512),[[r.u1,o.formData.preference.open_price]])]),(0,i.Lk)("div",l,[e[9]||(e[9]=(0,i.Lk)("label",{for:"close_price"},"Close Price Condition:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.formData.preference.close_price=t),id:"close_price",required:""},e[8]||(e[8]=[(0,i.Lk)("option",{value:"<"},"Less than previous interval",-1),(0,i.Lk)("option",{value:">"},"Greater than previous interval",-1)]),512),[[r.u1,o.formData.preference.close_price]])]),(0,i.Lk)("div",u,[e[10]||(e[10]=(0,i.Lk)("label",{for:"next_time"},"Next Time:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=t=>o.formData.next_time=t),id:"next_time",required:""},null,512),[[r.Jo,o.formData.next_time]])]),(0,i.Lk)("div",m,[e[11]||(e[11]=(0,i.Lk)("label",{for:"time_interval"},"Time Interval (seconds):",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=t=>o.formData.time_interval=t),id:"time_interval",required:""},null,512),[[r.Jo,o.formData.time_interval]])]),(0,i.Lk)("div",p,[e[12]||(e[12]=(0,i.Lk)("label",{for:"time_unit"},"Time Unit:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>o.formData.time_unit=t),id:"time_unit",required:""},null,512),[[r.Jo,o.formData.time_unit]])]),e[13]||(e[13]=(0,i.Lk)("button",{type:"submit"},"Submit",-1))],32)])}var f=a(4373),h={name:"NotificationPrefForm",props:{initialData:{type:Object,default:()=>({user_id:"",preference:{open_price:"<",close_price:">"},next_time:"",time_interval:"",time_unit:""})}},data(){return{formData:{...this.initialData}}},watch:{initialData:{handler(t){this.formData={...t}},deep:!0}},async created(){await this.fetchInitialData()},methods:{async fetchInitialData(){try{const t=await f.A.get("http://localhost:3100/api/notificationPref",{params:{user_id:1}});console.log("response :>> ",t),t.data&&(this.formData=t.data,this.formData.preference=JSON.parse(this.formData.preference),this.formData.next_time=new Date(this.formData.next_time).toISOString().slice(0,16)),console.log("this.formData :>> ",this.formData)}catch(t){console.error("Error fetching initial data:",t)}},async submitForm(){try{const t=await f.A.post("http://localhost:3100/api/notificationPref",this.formData);console.log("Response:",t.data),this.$emit("formSubmitted"),await this.fetchInitialData()}catch(t){console.error("Error submitting form:",t)}}}},v=a(1241);const b=(0,v.A)(h,[["render",d],["__scopeId","data-v-ca01645c"]]);var k=b,g=a(4232);const _=["value"];function D(t,e,a,n,o,c){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("form",{onSubmit:e[4]||(e[4]=(0,r.D$)(((...t)=>c.fetchData&&c.fetchData(...t)),["prevent"]))},[e[6]||(e[6]=(0,i.Lk)("label",{for:"timeUnit"},"选择时间单位:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.timeUnit=t),id:"timeUnit"},e[5]||(e[5]=[(0,i.Lk)("option",{value:"second"},"秒",-1),(0,i.Lk)("option",{value:"minute"},"分钟",-1)]),512),[[r.u1,o.timeUnit]]),e[7]||(e[7]=(0,i.Lk)("label",{for:"interval"},"选择时间间隔:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.interval=t),id:"interval"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.intervals,(t=>((0,i.uX)(),(0,i.CE)("option",{key:t,value:t},(0,g.v_)(t),9,_)))),128))],512),[[r.u1,o.interval]]),e[8]||(e[8]=(0,i.Lk)("label",{for:"startTime"},"选择起始时间:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=t=>o.startTime=t),id:"startTime"},null,512),[[r.Jo,o.startTime]]),e[9]||(e[9]=(0,i.Lk)("label",{for:"endTime"},"选择结束时间:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":e[3]||(e[3]=t=>o.endTime=t),id:"endTime"},null,512),[[r.Jo,o.endTime]]),e[10]||(e[10]=(0,i.Lk)("button",{type:"submit"},"获取数据",-1))],32),e[11]||(e[11]=(0,i.Lk)("div",{id:"chart",style:{width:"100%",height:"500px"}},null,-1))])}a(1454);var y=a(9671),L={name:"StockChart",data(){return{chart:null,timeUnit:"second",interval:1,intervals:[1,5,10,20,30,60],startTime:"",endTime:"",stockData:[]}},async created(){const t=(new Date).toISOString().slice(0,16);this.startTime=t,this.endTime=t,await this.fetchData(),this.initChart()},methods:{async fetchData(){try{console.log("startTime :>> ",new Date(this.startTime).getTime()),console.log("endTime :>> ",new Date(this.endTime).getTime());const t=await f.A.get("http://localhost:3100/api/stocks",{params:{timeUnit:this.timeUnit,interval:this.interval,startTime:new Date(this.startTime).getTime(),endTime:new Date(this.endTime).getTime()}});this.stockData=t.data,console.log("stockData :>> ",this.stockData),this.updateChart()}catch(t){console.error("Error fetching stock data:",t)}},initChart(){this.chart=y.Ts(document.getElementById("chart"));const t={title:{text:"Stock Prices"},tooltip:{trigger:"axis",show:!0,formatter:t=>{const[e,a]=t;return console.log("params :>> ",t),`\n              time: ${new Date(e.value[0]).toLocaleString()}<br/>\n              open_price: ${e.value[1]}<br/>\n              close_price: ${a.value[1]}\n            `}},legend:{data:["Open Price","Close Price"]},xAxis:{type:"category",data:this.stockData.map((t=>new Date(Number(t.interval_time)).toLocaleString()))},yAxis:{type:"value"},series:[{name:"Open Price",type:"line",data:this.stockData.map((t=>parseFloat(t.open_price)))},{name:"Close Price",type:"line",data:this.stockData.map((t=>parseFloat(t.close_price)))}]};this.chart.setOption(t)},updateChart(){if(!this.chart)return;const t=this.stockData;this.chart.setOption({xAxis:{data:t.map((t=>new Date(Number(t.interval_time)).toLocaleString()))},series:[{name:"Open Price",data:t.map((t=>parseFloat(t.open_price)))},{name:"Close Price",data:t.map((t=>parseFloat(t.close_price)))}]})}}};const T=(0,v.A)(L,[["render",D],["__scopeId","data-v-6b0d5b4c"]]);var C=T;function w(t,e,a,r,n,o){return(0,i.uX)(),(0,i.CE)("div")}var O={name:"AlertChecker",props:{userId:{type:Number,required:!0}},mounted(){this.checkAlerts(),setInterval(this.checkAlerts,1e3)},methods:{async checkAlerts(){try{const t=await f.A.get("http://localhost:3101/api/alerts",{params:{user_id:this.userId}});console.log("alert :>> ",t.data.alert),t.data.alert&&alert("You have a new notification!")}catch(t){console.error("Error checking alerts:",t)}}}};const x=(0,v.A)(O,[["render",w],["__scopeId","data-v-0b4485ff"]]);var S=x,A={name:"MainComponent",components:{NotificationPrefForm:k,StockChart:C,AlertChecker:S},async created(){}};const P=(0,v.A)(A,[["render",c],["__scopeId","data-v-7a9b03ae"]]);var U=P,F={name:"App",components:{MainComponent:U}};const I=(0,v.A)(F,[["render",o]]);var E=I;(0,r.Ef)(E).mount("#app")}},e={};function a(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,r,i,n){if(!r){var o=1/0;for(u=0;u<t.length;u++){r=t[u][0],i=t[u][1],n=t[u][2];for(var c=!0,s=0;s<r.length;s++)(!1&n||o>=n)&&Object.keys(a.O).every((function(t){return a.O[t](r[s])}))?r.splice(s--,1):(c=!1,n<o&&(o=n));if(c){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[r,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var i,n,o=r[0],c=r[1],s=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in c)a.o(c,i)&&(a.m[i]=c[i]);if(s)var u=s(a)}for(e&&e(r);l<o.length;l++)n=o[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(7202)}));r=a.O(r)})();
//# sourceMappingURL=app.31480189.js.map