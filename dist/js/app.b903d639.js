(function(){"use strict";var e={2942:function(e,t,a){var r=a(5130),i=a(6768);const n={id:"app"};function o(e,t,a,r,o,c){const s=(0,i.g2)("MainComponent");return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.bF)(s)])}function c(e,t,a,r,n,o){const c=(0,i.g2)("NotificationPrefForm"),s=(0,i.g2)("StockChart"),l=(0,i.g2)("AlertChecker");return(0,i.uX)(),(0,i.CE)("div",null,[t[0]||(t[0]=(0,i.Lk)("h1",null,"Notification Preferences and Stock Chart",-1)),(0,i.bF)(c),(0,i.bF)(s),(0,i.bF)(l,{userId:1})])}const s={class:"form-group"},l={class:"form-group"},u={class:"form-group"},m={class:"form-group"},p={class:"form-group"};function d(e,t,a,n,o,c){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,r.D$)(((...e)=>c.submitForm&&c.submitForm(...e)),["prevent"])),class:"compact-form"},[(0,i.Lk)("div",s,[t[7]||(t[7]=(0,i.Lk)("label",{for:"open_price"},"Open Price Condition:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.preference.open_price=e),id:"open_price",required:""},t[6]||(t[6]=[(0,i.Lk)("option",{value:"<"},"Less than previous interval",-1),(0,i.Lk)("option",{value:">"},"Greater than previous interval",-1)]),512),[[r.u1,o.formData.preference.open_price]])]),(0,i.Lk)("div",l,[t[9]||(t[9]=(0,i.Lk)("label",{for:"close_price"},"Close Price Condition:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.preference.close_price=e),id:"close_price",required:""},t[8]||(t[8]=[(0,i.Lk)("option",{value:"<"},"Less than previous interval",-1),(0,i.Lk)("option",{value:">"},"Greater than previous interval",-1)]),512),[[r.u1,o.formData.preference.close_price]])]),(0,i.Lk)("div",u,[t[10]||(t[10]=(0,i.Lk)("label",{for:"next_time"},"Next Time:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.next_time=e),id:"next_time",required:""},null,512),[[r.Jo,o.formData.next_time]])]),(0,i.Lk)("div",m,[t[11]||(t[11]=(0,i.Lk)("label",{for:"time_interval"},"Time Interval (seconds):",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.time_interval=e),id:"time_interval",required:""},null,512),[[r.Jo,o.formData.time_interval]])]),(0,i.Lk)("div",p,[t[12]||(t[12]=(0,i.Lk)("label",{for:"time_unit"},"Time Unit:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.time_unit=e),id:"time_unit",required:""},null,512),[[r.Jo,o.formData.time_unit]])]),t[13]||(t[13]=(0,i.Lk)("button",{type:"submit"},"Submit",-1))],32)])}var f=a(4373),h={name:"NotificationPrefForm",props:{initialData:{type:Object,default:()=>({user_id:"",preference:{open_price:"<",close_price:">"},next_time:"",time_interval:"",time_unit:""})}},data(){return{formData:{...this.initialData}}},watch:{initialData:{handler(e){this.formData={...e}},deep:!0}},async created(){await this.fetchInitialData()},methods:{async fetchInitialData(){try{const e=await f.A.get("http://112.124.59.151:3100/api/notificationPref",{params:{user_id:1}});console.log("response :>> ",e),e.data&&(this.formData=e.data,this.formData.preference=JSON.parse(this.formData.preference),this.formData.next_time=new Date(this.formData.next_time).toISOString().slice(0,16)),console.log("this.formData :>> ",this.formData)}catch(e){console.error("Error fetching initial data:",e)}},async submitForm(){try{const e=await f.A.post("http://112.124.59.151:3100/api/notificationPref",this.formData);console.log("Response:",e.data),this.$emit("formSubmitted"),await this.fetchInitialData()}catch(e){console.error("Error submitting form:",e)}}}},v=a(1241);const b=(0,v.A)(h,[["render",d],["__scopeId","data-v-d8962cd0"]]);var k=b,g=a(4232);const _=["value"];function D(e,t,a,n,o,c){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>c.fetchData&&c.fetchData(...e)),["prevent"]))},[t[6]||(t[6]=(0,i.Lk)("label",{for:"timeUnit"},"选择时间单位:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.timeUnit=e),id:"timeUnit"},t[5]||(t[5]=[(0,i.Lk)("option",{value:"second"},"秒",-1),(0,i.Lk)("option",{value:"minute"},"分钟",-1)]),512),[[r.u1,o.timeUnit]]),t[7]||(t[7]=(0,i.Lk)("label",{for:"interval"},"选择时间间隔:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.interval=e),id:"interval"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.intervals,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,g.v_)(e),9,_)))),128))],512),[[r.u1,o.interval]]),t[8]||(t[8]=(0,i.Lk)("label",{for:"startTime"},"选择起始时间:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=e=>o.startTime=e),id:"startTime"},null,512),[[r.Jo,o.startTime]]),t[9]||(t[9]=(0,i.Lk)("label",{for:"endTime"},"选择结束时间:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=e=>o.endTime=e),id:"endTime"},null,512),[[r.Jo,o.endTime]]),t[10]||(t[10]=(0,i.Lk)("button",{type:"submit"},"获取数据",-1))],32),t[11]||(t[11]=(0,i.Lk)("div",{id:"chart",style:{width:"100%",height:"500px"}},null,-1))])}a(1454);var y=a(9671),L={name:"StockChart",data(){return{chart:null,timeUnit:"second",interval:1,intervals:[1,5,10,20,30,60],startTime:"",endTime:"",stockData:[]}},async created(){const e=(new Date).toISOString().slice(0,16);this.startTime=e,this.endTime=e,await this.fetchData(),this.initChart()},methods:{async fetchData(){try{console.log("startTime :>> ",new Date(this.startTime).getTime()),console.log("endTime :>> ",new Date(this.endTime).getTime());const e=await f.A.get("http://112.124.59.151:3100/api/stocks",{params:{timeUnit:this.timeUnit,interval:this.interval,startTime:new Date(this.startTime).getTime(),endTime:new Date(this.endTime).getTime()}});this.stockData=e.data,console.log("stockData :>> ",this.stockData),this.updateChart()}catch(e){console.error("Error fetching stock data:",e)}},initChart(){this.chart=y.Ts(document.getElementById("chart"));const e={title:{text:"Stock Prices"},tooltip:{trigger:"axis",show:!0,formatter:e=>{const[t,a]=e;return console.log("params :>> ",e),`\n              time: ${new Date(t.value[0]).toLocaleString()}<br/>\n              open_price: ${t.value[1]}<br/>\n              close_price: ${a.value[1]}\n            `}},legend:{data:["Open Price","Close Price"]},xAxis:{type:"category",data:this.stockData.map((e=>new Date(Number(e.interval_time)).toLocaleString()))},yAxis:{type:"value"},series:[{name:"Open Price",type:"line",data:this.stockData.map((e=>parseFloat(e.open_price)))},{name:"Close Price",type:"line",data:this.stockData.map((e=>parseFloat(e.close_price)))}]};this.chart.setOption(e)},updateChart(){if(!this.chart)return;const e=this.stockData;this.chart.setOption({xAxis:{data:e.map((e=>new Date(Number(e.interval_time)).toLocaleString()))},series:[{name:"Open Price",data:e.map((e=>parseFloat(e.open_price)))},{name:"Close Price",data:e.map((e=>parseFloat(e.close_price)))}]})}}};const T=(0,v.A)(L,[["render",D],["__scopeId","data-v-3b97dbf7"]]);var C=T;function w(e,t,a,r,n,o){return(0,i.uX)(),(0,i.CE)("div")}var O={name:"AlertChecker",props:{userId:{type:Number,required:!0}},mounted(){this.checkAlerts(),setInterval(this.checkAlerts,1e3)},methods:{async checkAlerts(){try{const e=await f.A.get("http://112.124.59.151:3101/api/alerts",{params:{user_id:this.userId}});console.log("alert :>> ",e.data.alert),e.data.alert&&alert("You have a new notification!")}catch(e){console.error("Error checking alerts:",e)}}}};const x=(0,v.A)(O,[["render",w],["__scopeId","data-v-5b089ffc"]]);var S=x,A={name:"MainComponent",components:{NotificationPrefForm:k,StockChart:C,AlertChecker:S},async created(){}};const P=(0,v.A)(A,[["render",c],["__scopeId","data-v-7a9b03ae"]]);var U=P,F={name:"App",components:{MainComponent:U}};const I=(0,v.A)(F,[["render",o]]);var E=I;(0,r.Ef)(E).mount("#app")}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,r,i,n){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],i=e[u][1],n=e[u][2];for(var c=!0,s=0;s<r.length;s++)(!1&n||o>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(c=!1,n<o&&(o=n));if(c){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,i,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,n,o=r[0],c=r[1],s=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in c)a.o(c,i)&&(a.m[i]=c[i]);if(s)var u=s(a)}for(t&&t(r);l<o.length;l++)n=o[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(2942)}));r=a.O(r)})();
//# sourceMappingURL=app.b903d639.js.map